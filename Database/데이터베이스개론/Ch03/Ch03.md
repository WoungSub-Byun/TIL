# 데이터 베이스 시스템

---

## DBS의 정의

- DBS(DataBase System)
  > DB vs DBMS vs DBS
- DB: 저장된 데이터의 집합
- DBMS: 데이터베이스에 저장된 데이터가 일관되고 무결한 상태로 유지되도록 관리하는 역할
- DBS: 데이터베이스와 데이터베이스 관리 시스템을 이용해 조직에 필요한 정보를 제공해주는 전체 시스템

## DB의 구조

### 스키마

- 데이터베이스에 저장되는 데이터 구조와 제약조건을 정의한 것
- 인스턴스(Instance): 정의된 스키마에 따라 데이터베이스에 실제로 저장된 값

### 3단계 DB 구조 (3-level database architecture)

- 손쉽게 DB를 이해할 수 있도록 미국의 표쥰화 기관 ANSI/SPARC에서 제안한 구조
- 개념
  - 데이터 베이스를 외부, 개념, 내부 세 단계로 나누어 이해한다.
  - 각 단계별로 다른 추상화(abstraction)을 제공하여 DB를 관리한다.
- 단계
  - 외부 단계(external level)
    - 개별 사용자 관점
    - 각 사용자가 생각하는 데이터베이스의 모습을 한 논리적인 구조
    - 서브 스키마라고도 부름
  - 개념 단계(conceptual level)
    - 데이터 베이스를 조직 전체의 관점에서 이해하고 표현
  - 내부 단계(internal level)
    - 데이터베이스를 저장 장치의 관점에서 이해
    - 내부 스키마: 전체 데이터베이스가 저장 장치에 실제로 저장되는 방법 정의
    - 내부 스키마는 파일에 데이터를 저장하는 레코드의 구조, 필드 크기, 접근 경로 등을 정의
    - 데이터베이스의 개념 스키마에 대한 물리적인 저장 구조를 표현하기 때문에 데이터베이스에 하나만 존재

### 데이터 독립성

- 하나의 DB는 세 가지 유형의 스키마로 나뉘지만, 각 스키마는 데이터베이스를 바라보는 관점이 다를 뿐 모두 같은 데이터베이스를 표현한다.
- 매핑(mapping)
  - 각 레벨의 스키마 사이의 대응 관계

* 데이터베이스를 단계별로 나누고 스키마를 유지하며 대응 관계를 정의하는 목적 -> **_데이터 독립성-data independency_**의 실현

- 데이터 독립성이란
  - 하위 스키마를 변경하더라도 상위 스키마가 영향을 받지 않는 특성
  - 3-level 구조에서는
    - 논리적 데이터 독립성
    - 물리적 데이터 독립성
      이 존재한다.
- 논리적 데이터 독립성
  - 개념 스키마가 변경되어도 외부 스키마가 영향을 받지 않는 것

- 물리적 데이터 독립성
  - 내부 스키마가 변경되더라도 개념 스키마가 영향을 받지 않는 것

### 데이터 사전
- 데이터 베이스에 저장되는 데이터에 관한 정보를 저장하는 곳
- = 시스템 카탈로그(system catalog), 메타 데이터(meta data)
- DBMS가 스스로 생성하고 유지하는 것
  - DBMS가 데이터 사전을 편집할 수 있지만 사용자는 Read-Only권한만을 가진다.

## 데이터 베이스 사용자
- 데이터베이스 관리자(DBA: DataBase Administrator)
  - DB를 직접 사용하기보다는 조직 내의 사용자를 위해 설계 및 구축, 제어한다.
  - 주요 업무
    - 데이터베이스 구성 요소 선정
    - 데이터베이스 스키마 정의
    - 물리적 저장 구조와 접근 방법 결정
    - 무결정 유지를 위한 제약조건 정의
    - 보안 및 접근 권한 정책 결정
    - 백업 및 회복 기법 정의
    - 시스템 데이터베이스 관리
    - 시스템 성능 감시 및 성능 분석
      - 병목현상(bottleneck): 전체시스템이 하나의 구성요소로 인해 성능의 저하가 발생하는 것
    - 데이터베이스 재구성
- 최종 사용자
  - 데이터를 조작하기 위해 DB에 접근하는 사람들
  - DBMS에서 제공하는 GUI프로그램을 사용하거나 DML을 사용한다.
- 응용 프로그래머
  - 프로그래밍언어로 프로그램을 작성하면서 DB에 접근하는 사용자


## 데이터 언어
- DBMS에 원하는 작업을 요청할 때 쓰이는 수단
- 종류
  - **데이터 정의어(DDL: Data Definition Language)**
    - 새로운 데이터 베이스를 구축하기 위해 *스키마를 정의*하거나 *기존 스키마의 정의를 삭제 또는 수정*하기 위해 사용하는 데이터 언어
  - **데이터 조작어(DML: Data Manipulation Language)**
    - 데이터의 *삽입, 삭제, 수정, 검색* 등의 작업을 요청할 때 쓰이는 데이터 언어
    - 절차적 데이터 조작어
      - 사용자가 어떤 데이터를 원하고 어떻게 처리해야하는지 설명하는 조작어
    - 비절차적 데이터 조작어
      - 어떤 데이터를 원하는지만 설명하고 어떻게 처리해야하는지는 DBMS에 맡기는 조작어
  - **데이터 제어어(DCL: Data Control Language)**
    - DB에 저장된 데이터를 여러 사용자가 무결성과 일관성을 유지하며 문제없이 공유할 수 있도록, 규칙이나 기법을 정의하는데 사용되는 데이터 언어
    - 다음의 특성을 보장하기위해 DCL이 만들어졌다고 해도 무방하다.
      - 무결성
      - 보안
      - 회복
      - 동시성

## DBMS의 구성
- 질의 처리기(query processor)
  - DDL Compiler
    - DDL로 작성된 스키마의 정의를 해석 후 데이터 베이스 구축
  - DML Pre Compiler
    - 프로그램에 삽입된 DML을 추출하여 DML Compiler에 전달
  - DML Compiler
    - DML로 작성된 데이터의 처리를 분석하여 Runtime Database processor가 이해할 수 있도록 컴파일한다.
  - Runtime Database processor
    - 저장 데이터 관리자를 통해 DB에 접근하여 DML Compiler로부터 받은 요구를 실제로 실행한다. 
  - Transaction manager
    - DB에 접근하는 과정에서 접근 권한이 유효한지 검사하고 제약조건 위반여부를 확인
- 저장 데이터 관리자
  - 운영체제의 도움을 받아 DB에 직접 접근한다.